<%
# Formulaire d'édition d'une étape
%>
<%
site.require 'form_tools'

# On doit requérir toutes les données de Unan qui contiennent notamment les
# données listes (pour les bits)
Dir["./objet/unan/lib/data/**/*.rb"].each{|m| require m}

# Le préfix des champs
form.prefix = 'etape'
%>
<form id="form_edit_etape_unan" class="form2080" action="abs_etape/save" method="POST">
  <%= form.field_text("Numéro", "numero", "", {class: 'short'}) %>
  <%= form.field_description("Numéro de 1 à 9999. Pour une nouvelle étape, l'unicité de ce numéro sera vérifié avant l'enregistrement.") %>
  <%= form.field_text("Titre", "titre", "", {placeholder: 'Titre de l’étape'}) %>
  <%= form.field_text("Jour départ", 'jour_start', "", {class:'short', text_after:"ième jour"}) %>
  <%= form.field_description("Le “jour départ” définit le jour de démarrage de l'étape, en sachant que les étapes peuvent se chevaucher suivant leur durée. C'est ce qui permet de mener plusieurs travaux parallèlement.") %>
  <%= form.field_text("Durée", 'duree', "", {class:'short', text_after:"jours"}) %>
  <%= form.field_raw("Sujet cible", 'sujet_cible', nil, { field: UnanAdmin::menu_sujets_cibles(id: 'etape_sujet_cible', name: 'etape[sujet_cible]') }) %>
  <%= form.field_description("Pour ajouter de nouvelles valeurs de sujets ci-dessus, éditer le fichier `./objet/unan_admin/lib/data/sujets_cibles.rb` (recharger la page pour actualiser le menu et trouver la nouvelle valeur).") %>
  <%# étape précédente (if any) %>
  <%= form.field_text("Étape précédente", 'previous_etape', "", {class: 'short'}) %>
  <%= form.field_description("L'étape précédente est à préciser lorsque l'étape est une suite exacte d'une étape précédente, par exemple lorsqu'il s'agit de poursuivre un document qui a été ébauché avant, suivant le développement en spirale.") %>
  <%# TRAVAIL %>
  <%= form.field_textarea("Travail", 'travail', "") %>
  <%= form.field_description("Le travail exact à accomplir au cours de cette étape de travail, abstraction faite des questionnaires et autres quiz.") %>
  <%# RESULTAT ATTENDU %>
  <%= form.field_textarea("Résultat", 'resultat',"") %>
  <%= form.field_description("Le type de résultat attendu, un document, un plan ou autre, mais décrit de façon littéraire, contrairement à la donnée suivante.") %>
  <%= form.field_select("Support du résultat", 'support', "", {values: Unan::SUPPORTS_RESULTAT}) %>
  <%= form.field_select("Destinataire", 'destinataire', "", {values: Unan::DESTINATAIRES}) %>
  <%= form.field_description("Définit à qui le résultat est destiné, virtuellement.") %>
  <%= form.field_select("Niveau d'exigence", 'niveau_dev', "", {values: Unan::NIVEAU_DEVELOPPEMENT}) %>
  <%= form.field_description("Le niveau d'exigence définit en quelque sort le niveau de développement à obtenir sur le document. Pour bien faire comprendre le principe des quatre vis et le gérer au cours du développement.") %>
</form>
