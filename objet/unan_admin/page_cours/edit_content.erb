<%
# Vue pour éditer le contenu de la page de cours, quelle qu'elle soit
raise_unless_admin
%>
<%
page_id = site.current_route.objet_id

page.add_javascript((site.folder_deeper_javascript+"optional/Snippets_1.0.js").to_s)

%>
<h1>Édition page cours #<%= page_cours.id %> (type: <%= page_cours.type %>)</h1>

<div id="help_edit_content">
<pre>
            --------
            | AIDE |
            --------

         Snippets
  ------------------------------
  work   Insérer une balise work
         tout type de travail
         Note : un AbsWork
  page   Une balise vers une page
         de cours (son ID en $1)
  film   Une balise de film avec
         en $1 l'ID du film
  mot    Une balise pour un mot du
         scénodico avec en $1 son
         ID.
</pre>
</div>

<div id="top_tools" class="tiny right" style="margin-top:0!important;">
  <%= "CONSTRUIRE".in_a(href:"page_cours/#{page_id}/build?in=unan_admin") %>
  <%= "Visualiser".in_a(href:"page_cours/#{page_id}/read?in=unan", target:'_show_page_') %>
  <%= "Optimise l'interface".in_a(id:'btn_optimize',onclick:"$.proxy(PageCours,'toggle_interface')()") %>
</div>
<form class="" action="page_cours/<%= page_id %>/edit_content?in=unan_admin" method="POST">
  <%= "save_page_content".in_hidden(name:'operation') %>
  <%= "not_optimized".in_hidden(name:"interface_state", id:"interface_state") %>
  <textarea name="page_cours[content]" id="page_cours_content"><%=
    page_cours.content
  %></textarea>
  <input type="submit" class="btn fright" value="Enregistrer" />
</form>
